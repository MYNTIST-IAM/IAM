# MYNTIST Survivability IAM System

An adaptive, self-healing identity and access management (IAM) system built on mathematical survivability rules.

## Overview

This system manages GitHub tokens, AI agents, and product connections through real-time scoring, auditing, and self-healing automation.

## Project Structure

```
IAM/
├── .github/
│   └── workflows/
│       └── alerts.yml          # GitHub Actions for automated alerts
├── scripts/
│   ├── survivability_scoring.py    # Scoring bot that calculates token health
│   └── fetch_github_members.py     # Fetches GitHub org members and updates ledger
├── security/
│   └── token-ledger.yml        # Central registry of all tokens
├── reports/                    # Generated by scoring bot
│   ├── token_health.json
│   └── token_health_report.md
├── .env_example               # Environment variables template
├── .gitignore
├── requirements.txt
└── README.md
```

## Setup

### 1. Install Dependencies

```bash
pip install -r requirements.txt
```

### 2. Configure Environment Variables

Create a `.env` file based on `.env_example`:

```bash
cp .env_example .env
```

Edit `.env` and add your credentials:

```
ORG_NAME=MYNTIST-IAM
PAT_TOKEN=your_github_personal_access_token_here
```

**Note:** Make sure your GitHub PAT has the following scopes:
- `read:org` - To read organization membership
- `admin:org` - To read member roles (if you have admin access)

### 3. Fetch GitHub Members

Run the script to populate the token ledger with GitHub organization members:

```bash
python scripts/fetch_github_members.py
```

This will:
- Fetch all members from your GitHub organization
- Get their roles (admin/member)
- Create token entries with their GitHub user ID as the `token_id`
- Add metadata like `entity_type: 'user'`, `role`, and `state`

### 4. Run Survivability Scoring

Calculate health scores for all tokens:

```bash
python scripts/survivability_scoring.py
```

This generates:
- `reports/token_health.json` - JSON format for programmatic access
- `reports/token_health_report.md` - Human-readable markdown report

## Token Ledger Schema

Each token in `security/token-ledger.yml` contains:

| Field | Type | Description |
|-------|------|-------------|
| `token_id` | String | Unique identifier (GitHub user ID for users, custom for services) |
| `owner` | String | Username or system account owner |
| `scope` | String | GitHub scopes or API access levels |
| `usage` | String | Area of use (CI/CD, deployment, API access, etc.) |
| `issued_on` | Date | Creation date |
| `expiry` | Date | Expiration date |
| `last_used` | Date | Last activity timestamp |
| `audit_trail` | List | Commits, repos, or services using the token |
| `survivability_score` | Float | Calculated by scoring bot (0–1) |
| `entity_type` | String | `'user'` for GitHub users, `'service_account'` for services |
| `role` | String | GitHub role (admin/member) or service role |
| `state` | String | Status (active/pending/inactive) |

## Survivability Scoring Formula

The system uses a mathematical model to calculate token health:

```
S = (1 / Q_perms) × cos(scope_drift) × audit_memory
```

Where:
- **Q_perms** = granted_permissions / used_permissions
- **scope_drift** = difference in scope vs. last version
- **audit_memory** = 1 if token has full audit trail, else <1

### Health Status

- **Healthy**: S ≥ 0.8
- **Degrading**: 0.5 ≤ S < 0.8
- **Critical**: S < 0.5

## Automated Workflows

The system includes GitHub Actions workflows that:
- Run nightly scoring automatically
- Send alerts for degrading tokens
- Trigger auto-healing mechanisms for critical tokens

## Next Steps

1. **Phase 2**: Implement auto-heal mechanisms (token rotation, scope reduction)
2. **Phase 3**: Add agent ledger for AI agents
3. **Phase 4**: Build React dashboard for visualization
4. **Phase 5**: Add Slack/Teams notifications

## Security Notes

- Never commit `.env` file (it's in `.gitignore`)
- Token IDs are stored, but actual token values should never be in the ledger
- All sensitive operations should use GitHub Secrets in CI/CD

